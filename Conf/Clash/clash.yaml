# [sub-link]æ›¿æ¢ä¸ºè®¢é˜…åœ°å€

# é€šç”¨é…ç½®
port: 7890
socks-port: 7891
redir-port: 7892
tproxy-port: 7893
# å¯åŠ¨æ—¶çš„é»˜è®¤æ¨¡å¼
mode: Rule
# æ—¥å¿—ç­‰çº§
log-level: info
# å…è®¸ipv6
ipv6: true
# å…è®¸å…±äº«ä»£ç†
allow-lan: true
# â€œ*â€ä¸ºç»‘å®šæ¥è‡ªå±€åŸŸç½‘çš„æ‰€æœ‰ipåœ°å€
bind-address: "*"

# bypasså’Œdns > fake-ip-filteræ˜¯ä»surgeå¤åˆ¶è¿‡æ¥çš„, å¯èƒ½éœ€è¦æ ¹æ®è‡ªèº«æƒ…å†µä¿®æ”¹
# è·³è¿‡ä»£ç†, æ›´å¤šçš„å¯ä»¥çœ‹ https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GeneralClashConfig.yml
bypass:
  - localhost
  - '*.local'
  - captive.apple.com
  - e.crashlytics.com
  - sequoia.apple.com
  - seed-sequoia.siri.apple.com
  - www.baidu.com
  - passenger.t3go.cn
  - yunbusiness.ccb.com
  - wxh.wo.cn
  - gate.lagou.com
  - www.abchina.com.cn
  - login-service.mobile-bank.psbc.com
  - mobile-bank.psbc.com
  - 10.0.0.0/8
  - 100.64.0.0/10
  - 127.0.0.1/32
  - 169.254.0.0/16
  - 172.16.0.0/12
  - 192.168.0.0/16
  - 192.168.122.1/32
  - 193.168.0.1/32
  - 224.0.0.0/4
  - 255.255.255.255/32
  - ::1/128
  - fc00::/7
  - fd00::/8
  - fe80::/10
  - ff00::/8
  - 2001::/32
  - 2001:db8::/32
  - 2002::/16
  - ::ffff:0:0:0:0/1
  - ::ffff:128:0:0:0/1

# dnsåŠŸèƒ½
dns:
  # æ˜¯å¦å¯ç”¨dnsåŠŸèƒ½
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  # æ¨¡å¼, redir-hostæˆ–fake-ip
  enhanced-moode: redir-host
  nameserver:
    - 223.5.5.5 # é˜¿é‡Œ
    - 180.76.76.76 # ç™¾åº¦
    - 119.29.29.29 # è…¾è®¯
    - 114.114.114.114 # 114
    - 117.50.11.11 # ONE æ‹¦æˆªç‰ˆ
    - 117.50.10.10 # ONE çº¯å‡€ç‰ˆ
    - https://doh.360.cn/dns-query # 360 DoH
    - https://dns.alidns.com/dns-query # é˜¿é‡Œ DoH
  fallback:
    - 8.8.8.8 # è°·æ­Œ
    - 1.1.1.1 # cloudflare
    - tls://dns.google:853
    - tls://1.0.0.1:853
    - tls://dns.rubyfish.cn:853
    - https://dns.google/dns-query # è°·æ­Œ DoH
    - https://cloudflare-dns.com/dns-query # cloudflare DoH
    - https://dns.rubyfish.cn/dns-query # çº¢é±¼ DoH
  fallback-filter:
    geooip: true
    # åœ¨è¿™ä¸ªç½‘æ®µå†…çš„ IP åœ°å€ä¼šè¢«è€ƒè™‘ä¸ºè¢«æ±¡æŸ“çš„ IP
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
  fake-ip-range: 198.18.0.1/16
  # fake ipç™½åå•(æ€»æ˜¯ä»¥çœŸå®ipè¿”å›, *å¼€å¤´çš„éœ€è¦''åŒ…èµ·æ¥)
  fake-ip-filter:
    - '*.lan'
    - '*.direct'
    - cable.auth.com
    - '*.msftconnecttest.com'
    - '*.msftncsi.com'
    - network-test.debian.org
    - detectportal.firefox.com
    - resolver1.opendns.com
    - '*.srv.nintendo.net'
    - '*.stun.playstation.net'
    - xbox.*.microsoft.com
    - '*.xboxlive.com'
    - stun.*
    - global.turn.twilio.com
    - global.stun.twilio.com
    - app.yinxiang.com
    - injections.adguard.org
    - local.adguard.org
    - localhost.*.qq.com
    - localhost.*.weixin.qq.com
    - '*.logon.battlenet.com.cn'
    - '*.logon.battle.net'
    - '*.blzstatic.cn'
    - music.163.com
    - '*.music.163.com'
    - '*.126.net'
    - musicapi.taihe.com
    - music.taihe.com
    - songsearch.kugou.com
    - trackercdn.kugou.com
    - '*.kuwo.cn'
    - api-jooxtt.sanook.com
    - api.joox.com
    - joox.com
    - y.qq.com
    - '*.y.qq.com'
    - streamoc.music.tc.qq.com
    - mobileoc.music.tc.qq.com
    - isure.stream.qqmusic.qq.com
    - dl.stream.qqmusic.qq.com
    - aqqmusic.tc.qq.com
    - amobile.music.tc.qq.com
    - '*.xiami.com'
    - '*.music.migu.cn'
    - music.migu.cn
    - proxy.golang.org
    - '*.mcdn.bilivideo.cn'
    - '*.cmpassport.com'
    - id6.me
    - open.e.189.cn
    - mdn.open.wo.cn
    - opencloud.wostore.cn
    - auth.wosms.cn
    - '*.jegotrip.com.cn'
    - '*.icitymobile.mobi'
    - '*.pingan.com.cn'
    - '*.cmbchina.com'
    - '*.10099.com.cn'
    - pool.ntp.org
    - '*.pool.ntp.org'
    - ntp.*.com
    - time.*.com
    - ntp?.*.com
    - time?.*.com
    - time.*.gov
    - time.*.edu.cn
    - '*.ntp.org.cn'
    - PDC._msDCS.*.*
    - DC._msDCS.*.*
    - GC._msDCS.*.*



# èŠ‚ç‚¹èšåˆä»¥åŠè§„åˆ™åˆ†æµ
proxy-providers:
  MySub: &MySub
    type: http
    interval: 86400
    url: [sub-link]
    path: ./profiles/MySub.yml
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 86400

  HK :
    <<: *MySub
    filter: 'æ¸¯|é¦™æ¸¯|Hong Kong|HK|ğŸ‡­ğŸ‡°'

  TW :
    <<: *MySub
    filter: 'å°|æ¹¾|å°æ¹¾|å°åŒ—|TaiWan|TW|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³'

  JP :
    <<: *MySub
    filter: 'æ—¥|æ—¥æœ¬|Japan|JP|ğŸ‡¯ğŸ‡µ'

  KR :
    <<: *MySub
    filter: 'éŸ©|éŸ©å›½|Korea|KR|ğŸ‡°ğŸ‡·'

  US :
    <<: *MySub
    filter: 'ç¾|ç¾å›½|United States|US|ğŸ‡ºğŸ‡¸'

  SG :
    <<: *MySub
    filter: 'å¡|æ–°åŠ å¡|ç‹®åŸ|Singapore|SG|ğŸ‡¸ğŸ‡¬'

proxy-groups:
  - name: ğŸŒ å…¨å±€é€‰æ‹©
    type: select
    proxies: [ğŸš€ è‡ªåŠ¨é€‰æ‹©, ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹©, ğŸ¯ ç›´æ¥è¿æ¥, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹]

  - name: ğŸš€ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    tolerance: 200
    interval: 120   # interval â‰  0
    url: http://www.gstatic.com/generate_204
    proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹]

  - name: ğŸ” å¹¿å‘Šæ‹¦æˆª 
    type: select
    proxies: [ğŸˆ² ç¦æ­¢è®¿é—®, ğŸ¯ ç›´æ¥è¿æ¥, ğŸŒ å…¨å±€é€‰æ‹©, ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹©] 

  - name: ğŸš« æœ€ååŒ¹é…
    type: select
    proxies: [ğŸ¯ ç›´æ¥è¿æ¥, ğŸŒ å…¨å±€é€‰æ‹©, ğŸˆ² ç¦æ­¢è®¿é—®, ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹©]
    
  - name: ğŸ“µ ç”µæŠ¥é€šè®¯
    type: select
    proxies: [ğŸŒ å…¨å±€é€‰æ‹©, ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹]

  - name: ğŸ“¹ å“”å“©å“”å“©
    type: select
    proxies: [ğŸ¯ ç›´æ¥è¿æ¥, ğŸŒ å…¨å±€é€‰æ‹©, ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹]

  - name: ğŸ³ å¼€å‘å·¥å…·
    type: select
    proxies: [ğŸŒ å…¨å±€é€‰æ‹©, ğŸ¯ ç›´æ¥è¿æ¥, ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹]
  
  - name: ğŸŸ æ•´ç‚¹è–¯æ¡
    type: select
    proxies: [ğŸŒ å…¨å±€é€‰æ‹©, ğŸ¯ ç›´æ¥è¿æ¥, ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹]

  - name: ğŸ” æ•´ç‚¹æ±‰å ¡
    type: select
    proxies: [ğŸ¯ ç›´æ¥è¿æ¥, ğŸŒ å…¨å±€é€‰æ‹©, ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹]

  - name: ğŸ›©ï¸ æ‰‹åŠ¨é€‰æ‹© 
    type: select
    use:
      - MySub

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    tolerance: 200
    interval: 120
    url: http://www.gstatic.com/generate_204
    use:
      - HK

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    tolerance: 200
    interval: 120
    url: http://www.gstatic.com/generate_204
    use:
      - TW

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    tolerance: 200
    interval: 120
    url: http://www.gstatic.com/generate_204
    use:
      - JP

  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: url-test
    tolerance: 200
    interval: 120
    url: http://www.gstatic.com/generate_204
    use:
      - KR

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    type: url-test
    tolerance: 200
    interval: 120
    url: http://www.gstatic.com/generate_204
    use:
      - US

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    type: url-test
    tolerance: 200
    interval: 120
    url: http://www.gstatic.com/generate_204
    use:
      - SG

  - name: ğŸ¯ ç›´æ¥è¿æ¥
    type: select
    proxies :
      - DIRECT

  - name: ğŸˆ² ç¦æ­¢è®¿é—®
    type: select
    proxies :
      - REJECT

rule-providers:
  # ç›´è¿ä¿®æ­£
  RULE-Lan:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan_No_Resolve.yaml"
    path: ./Rule/Lan.yaml
    interval: 86400

  RULE-Direct:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct_No_Resolve.yaml"
    path: ./Rule/Direct.yaml
    interval: 86400

  # éšç§ä¿æŠ¤ã€ååŠ«æŒã€å¹¿å‘Šæ‹¦æˆª
  RULE-Privacy:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy_Classical_No_Resolve.yaml"
    path: ./Rule/Privacy.yaml
    interval: 86400

  RULE-Hijacking:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Hijacking/Hijacking_No_Resolve.yaml"
    path: ./Rule/Hijacking.yaml
    interval: 86400

  RULE-AdvertisingLite:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite_No_Resolve.yaml"
    path: ./Rule/AdvertisingLite.yaml
    interval: 86400

  # åœ°åŒºåˆ†æµ
  RULE-Pixiv:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Pixiv/Pixiv.yaml"
    path: ./Rule/Pixiv.yaml
    interval: 86400

  RULE-Bahamut:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml"
    path: ./Rule/Bahamut.yaml
    interval: 86400

  # åº”ç”¨åˆ†æµ
  RULE-BiliBili:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml"
    path: ./Rule/BiliBili.yaml
    interval: 86400

  RULE-Telegram:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml"
    path: ./Rule/Telegram.yaml
    interval: 86400

  RULE-GitHub: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml"
    path: ./Rule/Github.yaml
    interval: 86400

  RULE-Developer: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Developer/Developer.yaml"
    path: ./Rule/Developer.yaml
    interval: 86400

  # å›½å¤–å…œåº•
  RULE-Cloudflare:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Cloudflare/Cloudflare.yaml"
    path: ./Rule/Cloudflare.yaml
    interval: 86400

  RULE-GlobalMedia: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml"
    path: ./Rule/GlobalMedia.yaml
    interval: 86400

  RULE-Proxy: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Proxy/Proxy_Classical.yaml"
    path: ./Rule/Proxy.yaml
    interval: 86400

  RULE-Global: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Classical.yaml"
    path: ./Rule/Global.yaml
    interval: 86400

  # å›½å†…å…œåº•
  RULE-Download: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Download/Download_No_Resolve.yaml"
    path: ./Rule/Download.yaml
    interval: 86400

  RULE-Cloudflarecn: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Cloudflarecn/Cloudflarecn_No_Resolve.yaml"
    path: ./Rule/Cloudflarecn.yaml
    interval: 86400
    
  RULE-ChinaMedia: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia_No_Resolve.yaml"
    path: ./Rule/ChinaMedia.yaml
    interval: 86400
  
  RULE-ChinaIPs: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs_Classical_No_Resolve.yaml"
    path: ./Rule/ChinaIPs.yaml
    interval: 86400
    
  RULE-China: 
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China_Classical_No_Resolve.yaml"
    path: ./Rule/China.yaml
    interval: 86400

rules:
  # ç›´è¿ä¿®æ­£
  - RULE-SET,RULE-Lan,ğŸ¯ ç›´æ¥è¿æ¥
  - RULE-SET,RULE-Direct,ğŸ¯ ç›´æ¥è¿æ¥
  # å¹¿å‘Šæ‹¦æˆªã€éšç§ä¿æŠ¤ã€ååŠ«æŒ
  - RULE-SET,RULE-Privacy,ğŸ” å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,RULE-Hijacking,ğŸ” å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,RULE-AdvertisingLite,ğŸ” å¹¿å‘Šæ‹¦æˆª
  # åœ°åŒºåˆ†æµ
  - RULE-SET,RULE-Pixiv,ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
  - RULE-SET,RULE-Bahamut,ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
  # åº”ç”¨åˆ†æµ
  - RULE-SET,RULE-Telegram,ğŸ“µ ç”µæŠ¥é€šè®¯
  - RULE-SET,RULE-Bilibili,ğŸ“¹ å“”å“©å“”å“©

  - RULE-SET,RULE-Github,ğŸ³ å¼€å‘å·¥å…·
  - RULE-SET,RULE-Developer,ğŸ³ å¼€å‘å·¥å…·
  # å›½å¤–å…œåº•
  - RULE-SET,RULE-Cloudflare,ğŸŸ æ•´ç‚¹è–¯æ¡
  - RULE-SET,RULE-GlobalMedia,ğŸŸ æ•´ç‚¹è–¯æ¡
  - RULE-SET,RULE-Proxy,ğŸŸ æ•´ç‚¹è–¯æ¡
  - RULE-SET,RULE-Global,ğŸŸ æ•´ç‚¹è–¯æ¡
  # å›½å†…å…œåº•
  - RULE-SET,RULE-Download,ğŸ” æ•´ç‚¹æ±‰å ¡
  - RULE-SET,RULE-Cloudflarecn,ğŸ” æ•´ç‚¹æ±‰å ¡
  - RULE-SET,RULE-ChinaMedia,ğŸ” æ•´ç‚¹æ±‰å ¡
  - RULE-SET,RULE-ChinaIPs,ğŸ” æ•´ç‚¹æ±‰å ¡
  - RULE-SET,RULE-China,ğŸ” æ•´ç‚¹æ±‰å ¡
  # Final
  - GEOIP,CN,ğŸ¯ ç›´æ¥è¿æ¥
  - MATCH,ğŸš« æœ€ååŒ¹é…