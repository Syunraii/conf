#!name=🔨 Modify: Google
#!desc=[修改] Google \n1.防止自动换区\n2.并发搜索, 尽量避免人机验证
#!system=ios
#!category=🔨 Modify

#!author=NobyDa
#!homepage=https://raw.githubusercontent.com/NobyDa/Script/master/Surge/Module/GoogleCAPTCHA.sgmodule

#!arguments=超时时间:10, 策略正则:.+, 脚本引擎:auto
#!arguments-desc=1️⃣ 超时时间\n\n默认10秒\n\n2️⃣ 策略正则\n\n策略/策略组名的正则表达式, 例如^(🇸🇬|🇭🇰)\s.*\d+$,如需同时使用所有策略/策略组可使用.+表示\n\n3️⃣ 脚本引擎\n\n可选jsc/webview/auto, 默认auto

[URL Rewrite]
# Module: Google 
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 307
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 307
^https?:\/\/(www.)?(g|google)\.(cn|com\.hk) 307 https://www.google.com

[Script]
# Module: Google 
修改_Google_CAPTCHA = type =http-response,requires-body=1,debug=0,max-size=0,timeout={{{超时时间}}},ability=http-client-policy,engine={{{脚本引擎}}},argument={{{策略正则}}},pattern=^https:\/\/www\.google\.com(?:\.[a-z]+|)\/(?:search\?(?:|.+?&)q=|$),script-path=https://raw.githubusercontent.com/NobyDa/Script/master/Surge/JS/Google_CAPTCHA.js

[MITM]
hostname = %APPEND% *.google.cn, *.g.cn, *.google.com.hk